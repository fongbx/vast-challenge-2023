<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-06-04">

<title>Proposal</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Oceanus Watch</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./proposal.html" aria-current="page">
 <span class="menu-text">Proposal</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./pdf/VAA_project_poster.pdf">
 <span class="menu-text">Poster</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://oceanuswatch.shinyapps.io/shinyapp/">
 <span class="menu-text">RShiny App</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html"><i class="bi bi-person-circle" role="img">
</i> 
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/fongbx/vast-challenge-2023"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text">Github</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">1</span>  Introduction</a></li>
  <li><a href="#objectives" id="toc-objectives" class="nav-link" data-scroll-target="#objectives"><span class="toc-section-number">2</span>  Objectives</a></li>
  <li><a href="#the-dataset" id="toc-the-dataset" class="nav-link" data-scroll-target="#the-dataset"><span class="toc-section-number">3</span>  The Dataset</a></li>
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology"><span class="toc-section-number">4</span>  Methodology</a></li>
  <li><a href="#approach" id="toc-approach" class="nav-link" data-scroll-target="#approach"><span class="toc-section-number">5</span>  Approach</a>
  <ul class="collapse">
  <li><a href="#identification-of-temporal-patterns" id="toc-identification-of-temporal-patterns" class="nav-link" data-scroll-target="#identification-of-temporal-patterns"><span class="toc-section-number">5.1</span>  Identification of temporal patterns</a></li>
  <li><a href="#evaluation-of-predicted-graph-edges" id="toc-evaluation-of-predicted-graph-edges" class="nav-link" data-scroll-target="#evaluation-of-predicted-graph-edges"><span class="toc-section-number">5.2</span>  Evaluation of predicted graph edges</a></li>
  <li><a href="#utilisation-of-predicted-graph-edges" id="toc-utilisation-of-predicted-graph-edges" class="nav-link" data-scroll-target="#utilisation-of-predicted-graph-edges"><span class="toc-section-number">5.3</span>  Utilisation of predicted graph edges</a></li>
  <li><a href="#identification-of-companies-involved-in-illegal-fishing" id="toc-identification-of-companies-involved-in-illegal-fishing" class="nav-link" data-scroll-target="#identification-of-companies-involved-in-illegal-fishing"><span class="toc-section-number">5.4</span>  Identification of companies involved in illegal fishing</a></li>
  </ul></li>
  <li><a href="#timeline" id="toc-timeline" class="nav-link" data-scroll-target="#timeline"><span class="toc-section-number">6</span>  Timeline</a></li>
  <li><a href="#tools-and-packages" id="toc-tools-and-packages" class="nav-link" data-scroll-target="#tools-and-packages"><span class="toc-section-number">7</span>  Tools and Packages</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="toc-section-number">8</span>  References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Proposal</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 4, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Illegal, unreported, and unregulated (IUU) fishing poses a significant threat to marine ecosystems worldwide. The World Wildlife Fund (WWF) estimates that IUU fishing equates to approximately 11-19% of reported global fisheries production and leads to losses of roughly $10-23.5 billion in value. Besides leading to the depletion of fish stocks, ecological imbalances, and negative impact on the livelihoods of small-scale coastal fishing communities that depend on fisheries for food, IUU fishing has also been associated with other crimes such as transnational syndicates and human trafficking (WWF, n.d.).</p>
<p>In general, IUU fishing refers to all fishing that breaks fisheries laws, or occurs outside the reach of fisheries laws and regulations (Bondaroff et al., 2015). It is important to distinguish the specific elements of IUU fishing so as to enable targeted recommendations to combat IUU fishing:</p>
<ul>
<li>Illegal: Fishing conducted by foreign vessels without permission of a jurisdiction</li>
<li>Unreported: Fishing which have been misreported/not reported to national relevant authority</li>
<li>Unregulated: Fishing conducted by vessels without nationality</li>
</ul>
<p>Understanding the modus operandi of IUU fishing will enable the relevant authorities to identify individuals and entities that fit a pattern of illegal fishing. The following indicators are some red flags which can be used to identify entities that are involved in IUU fishing (Widjaja et al., 2020):</p>
<ul>
<li>Transshipment: Moving the catch from one vessel to another at sea or at port. The tuna fish comprises a large portion of this, as it can be frozen and is highly-valued.</li>
<li>Data manipulation: The species or amounts caught, and the catch locations may be misreported or manipulated.</li>
<li>Vessel identify fraud: A vessel may use more than one identity, appearing under different names in different jurisdictions, or may use the identify of another genuine vessel, which results in 2 or more vessels having the same identify concurrently.</li>
</ul>
<p>Awareness of different facets of illegal fishing is imperative to combating IUU fishing, so as to protect marine ecosystems, ensure sustainable fisheries, and uphold human rights. The worrying statistics and indicators of IUU fishing underscore the urgency for targeted interventions.</p>
</section>
<section id="objectives" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Objectives</h1>
<p>Recognising the urgent need to address this issue, the country of Oceanus has partnered with FishEye International in the VAST Challenge 2023, which focuses on IUU fishing. By harnessing the capabilities of visual analytics, our team aims to address Mini-Challenge 2 to uncover hidden relationships and detect potential IUU fishing activities.</p>
<p>The team will work with the main dataset, and additional bundled edge data provided by FishEye to fulfil the following objectives:</p>
<ol type="1">
<li>Identify influential companies potentially involved in illegal fishing practices;</li>
<li>Assess the reliability of the additional data bundles to identify new temporal patterns or anomalies for companies.</li>
</ol>
<p>Through this data exploration and advanced visualisations, the team aspires to provide actionable insights that will aid in the identification of illegal fishing practices.</p>
</section>
<section id="the-dataset" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> The Dataset</h1>
<p>The following datasets from the VAST Challenge 2023 - Mini-Challenge 2 will be used:</p>
<p><strong>Main graph file:</strong> <em>mc2_challenge_graph.json</em> containing the main graph with 34,552 nodes representing the company that originated (or received) the shipment, and 5,464,092 directed edges representing directed edges from shipper to receiver. Additional node attributes (shpcountry and rcvcountry) and edge attributes (arrivaldate, hscode, valueofgoods, weight etc.) are available.</p>
<p><strong>12 bundle files</strong>: <em>carp.json, catfish.json, chub_mackerel.json, cod2.json, herring.json, lichen.json, mackerel.json, pollock.json, salmon.json, salmon_wgl.json, shark.json, tuna.json</em> containing additional AI-predicted edges that can be added to the main graph.</p>
</section>
<section id="methodology" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Methodology</h1>
<p>The steps required in this project are as follows:</p>
<p><strong>Data preparation:</strong> To perform data cleaning, wrangling and conversion of datasets into a format that can be plotted into network graphs and other visualisations. As the datasets are huge and contain noises, filtering will be performed based on challenge requirements (e.g., filtering out shipments where hscodes are not related to live fishes) to reduce nodes and edges to reasonable numbers for visualisation.</p>
<p><strong>Data analysis and visualisation:</strong> Use appropriate static and interactive statistical graphs to address the questions in the challenge.</p>
<p><strong>Interactive Dashboarding:</strong> Selected visualisations will be deployed as an interactive dashboard in an RShiny app. The RShiny app aims to enable FishEye International’s investigators to explore the prepared and filtered dataset for discovery of patterns and anomalies.</p>
</section>
<section id="approach" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Approach</h1>
<section id="identification-of-temporal-patterns" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="identification-of-temporal-patterns"><span class="header-section-number">5.1</span> Identification of temporal patterns</h2>
<p><strong>Problem Statement:</strong> Use visual analytics to identify temporal patterns for individual entities and between entities in the knowledge graph FishEye created from trade records. Categorise the types of business relationship patterns you find.</p>
<p><strong>Approach:</strong></p>
<p>First, we will visualise the temporal patterns of influential companies in the network.</p>
<ul>
<li>Three sets of influential companies will be identified:
<ul>
<li>Importers – Top 10 companies with the highest in-degree centrality</li>
<li>Exporters – Top 10 companies with the highest out-degree centrality</li>
<li>Intermediaries – Top 10 companies with the highest betweenness centrality</li>
</ul></li>
<li>Visualisations will be made available on the RShiny app (see prototype 1). Users can select any one of the identified companies and the following visualisations will be generated for exploring and identifying temporal patterns:
<ul>
<li>Network graph of the company and its linked nodes over the years (panel A)</li>
<li>Bar chart of the total frequency, weight and value of shipment of the company over the years (panel B)</li>
<li>Line chart of the company’s trade with its partner companies over the years. Multiple partner companies may be selected at the same time for comparison (panel C)</li>
</ul></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/prototype1.png" class="img-fluid figure-img"></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/prototype2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><em>Fig 1: Prototype 1</em></figcaption><p></p>
</figure>
</div>
<p>Next, we will also explore temporal patterns of trade routes.</p>
<ul>
<li>The shipping and receiving country of each shipment edge will be mapped based on the id of the source and target.</li>
<li>Visualisations will be made available on the RShiny app (see prototype 2). Users can select the year of interest and heatmaps will be generated to explore which shipping routes are most frequent in the year (panel A). A data table listing the top companies on that shipping route will also be shown (panel B).</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/prototype3.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><em>Fig 2: Prototype 2</em></figcaption><p></p>
</figure>
</div>
</section>
<section id="evaluation-of-predicted-graph-edges" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="evaluation-of-predicted-graph-edges"><span class="header-section-number">5.2</span> Evaluation of predicted graph edges</h2>
<p><strong>Problem Statement:</strong> Evaluate the sets of predicted knowledge graph links FishEye has provided using visual analytics. Which sets are most reliable for completing the graph?</p>
<p><strong>Approach:</strong></p>
<p>The bundles will be evaluated based on the following:</p>
<ul>
<li>Filtering out edges where hscodes are not related to live fishes. The remaining edges will have to be above a certain threshold.</li>
<li>Checking for whether the nodes and edges in the bundle forms a complete graph. The graph in the bundle should not have many disconnected components.</li>
<li>Checking for common nodes between the bundles and the main graph. If there are few common nodes, the added value of the bundle is limited.</li>
</ul>
</section>
<section id="utilisation-of-predicted-graph-edges" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="utilisation-of-predicted-graph-edges"><span class="header-section-number">5.3</span> Utilisation of predicted graph edges</h2>
<p><strong>Problem Statement:</strong> Illustrate how your visual analytics approach can be used to identify new patterns and/or anomalies that are present in the knowledge graph after you have added the links you deemed reliable in the previous question.</p>
<p><strong>Approach:</strong></p>
<p>The selected bundles from 5.2 will be added to the main graph to carry out the tasks in 5.1 again. Comparison will be made before and after the addition of the bundles, on the influential companies identified and their temporal patterns.</p>
</section>
<section id="identification-of-companies-involved-in-illegal-fishing" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="identification-of-companies-involved-in-illegal-fishing"><span class="header-section-number">5.4</span> Identification of companies involved in illegal fishing</h2>
<p><strong>Problem Statement:</strong> Identify companies that fit a pattern of illegal fishing. Use visualisations to support your conclusions and your confidence in them.</p>
<p><strong>Approach:</strong></p>
<p>We will identify companies that fit the pattern of illegal fishing using the following red flags:</p>
<ul>
<li>Sudden changes in shipment frequency</li>
<li>Abnormal ratio between declared goods value and goods weight</li>
</ul>
<p>With the companies that fit the pattern of illegal fishing identified, similar visualisations to the influential companies in 5.1 (see prototype 1) will be made available on the RShiny app. Users can select any one of the identified suspicious companies and the following visualisations will be generated to enable further exploration:</p>
<ul>
<li>Network graph of the company and its linked nodes over the years (panel A in prototype 1)</li>
<li>Bar chart of the total frequency, weight and value of shipment of the company over the years (panel B in prototype 1)</li>
<li>Line chart of the company’s trade with its partner companies over the years. Multiple partner companies may be selected at the same time for comparison (panel C in prototype 1)</li>
</ul>
<p>In addition, a calendar heatmap (see prototype 3) will be developed to illustrate the frequency of illegal activities conducted by fishing companies daily for each year. This visualisation will help to identify patterns and determine if there are specific periods or seasons during which these illegal companies are more prone to engaging in illegal fishing. The implementation of a calendar heatmap will effectively display this pattern. When a user clicks on a specific grid, a datatable will showcase the fishing activity details of the companies for that day.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/prototype4.png" class="img-fluid figure-img" width="638"></p>
<p></p><figcaption class="figure-caption"><em>Fig 3: Prototype 3</em></figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="timeline" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Timeline</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/gantt.png" class="img-fluid figure-img" width="711"></p>
<p></p><figcaption class="figure-caption">Fig 4: Gantt Chart</figcaption><p></p>
</figure>
</div>
</section>
<section id="tools-and-packages" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Tools and Packages</h1>
<p>R is the main tool used for data preparation and visualisation, together with the following R packages:</p>
<table class="table">
<colgroup>
<col style="width: 28%">
<col style="width: 71%">
</colgroup>
<thead>
<tr class="header">
<th>Packages</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>shiny, shinydashboard &amp; shinywidgets</td>
<td>For building interactive web application and visualisations</td>
</tr>
<tr class="even">
<td>shinythemes</td>
<td>For a wide variety of shiny themes</td>
</tr>
<tr class="odd">
<td>tidyverse</td>
<td>For data wrangling and visualisation</td>
</tr>
<tr class="even">
<td>jsonlite</td>
<td>For parsing json files from/to R objects</td>
</tr>
<tr class="odd">
<td>lubridate</td>
<td>For working with date-times and time-spans</td>
</tr>
<tr class="even">
<td>tidygraph</td>
<td>For graph and network manipulation</td>
</tr>
<tr class="odd">
<td>ggraph</td>
<td>An extension of ggplot2 for supporting relational data structures such as networks and graphs</td>
</tr>
<tr class="even">
<td>visNetwork</td>
<td>For interactive network visualisation</td>
</tr>
<tr class="odd">
<td>igraph</td>
<td>For creating and manipulating graphs and analysing networks</td>
</tr>
<tr class="even">
<td>DT</td>
<td>For creating interactive data tables</td>
</tr>
</tbody>
</table>
</section>
<section id="references" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> References</h1>
<p>Bondaroff, T. N. P., Werf, W. v. d., &amp; Reitano, T. (2015). The illegal fishing and Organized crime nexus: Illegal fishing as transnational organised crime. Retrieved from: https://www.unodc.org/documents/congress/background-information/NGO/GIATOC-Blackfish/Fishing_Crime.pdf</p>
<p>Widjaja, S., Long, T., &amp; Wirajuda H., et al.&nbsp;(2020). Illegal, unreported and unregulated fishing and associated drivers. Washington, DC: World Resources Institute. Retrieved from: www.oceanpanel.org/ iuu-fishing-and-associated-drivers.</p>
<p>WWF. (n.d.). <em>Illegal, unreported and unregulated fishing.</em> Retrieved from https://www.wwf.org.uk/what-we-do/illegal-unreported-unregulated-fishing#:~:text=IUU%20fishing%20equates%20to%20approximately,depend%20on%20fisheries%20for%20food.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>